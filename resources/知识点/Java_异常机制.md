[TOC]

## 参考文章

- 《Java编程思想》第12章 通过异常处理错误
- [为什么要抛出异常？](https://www.zhihu.com/question/26158399)
- [Java常见异常及解释](http://www.importnew.com/16725.html)
- [深入理解java异常处理机制](http://blog.csdn.net/hguisu/article/details/6155636)


## 异常-马士兵

1. 运行期出现的错误（不是编译时错误）

2. 注意出现异常的行号 和 异常的类型：为了明确程序出错的位置，逮到处理。

3. try{}代码块里 出现异常时，java虚拟机会为程序产生一个异常对象。->catch(Exception){...}

异常继承体系：

    Trowable
         |--Error 程序处理不了的问题（错误）
         |--Exception 程序能处理的问题（异常）
              |--RuntimeException
                   |--（经常出现的异常，可以捕获也可以不捕获。例如被零除，下标越界，要是都要捕获的话累死了。）
              |--（必须try-catch捕获或者继续抛出。例如，io异常。不然编译就不通过）

![Image-java-exception.png](https://github.com/personajian/newcoder/raw/master/resources/picture/Image-java-exception.png)

## 异常-毕向东

### 1. 异常的由来

>程序在运行期出现不正常情况。

异常的由来：**把问题 封装成 对象。**（降低错误处理代码的复杂度，同时也是易用OOP思想来封转错误，统一通过异常机制来处理。）

- 节省代码：将错误的检查处理统一到异常中。
- 代码和问题想分离：便于阅读、编写和调试。

捕获了异常，可以让当前方法终止，不影响其他程序的继续运行。

### 2. 异常的分类

对问题的划分：两种：

- 一种严重的问题：java通过Error类进行描述。癌。对Error一般不编写针对性的代码。
- 一种非严重问题：java通过Exception类进行描述。可治愈的疾病。可以针对性的处理方式。

无论error或者exception都具有一些共性内容。比如：

    Throwable
         |——Error
         |——Exception：将问题变成对象！


### 3. 异常的处理

java提供了特有的语句进行处理。

```java
    try
    {
         需要被检测的代码；
    }
    catch(异常类 变量)
    {
         处理异常的代码（处理方式）
    }
    finally
    {
         一定会执行的语句；
    }
```

将catch(Exception e){...}视为一种特殊的方法，参数只能使异常对象。


#### 处理异常的常用方法

```java
e.getMessage();
e.toString();//异常名称：异常信息
e.printStackTrace();//jvm默认的异常处理机制，再调用printStackTrace方法，打印异常的堆栈信息。
```

#### 声明给外部调用者（throws）

    int div(int a, int b)

 >功能实现者 声明异常给 外部调用者。 

 在功能（方法上）通过throws的关键字申明了该功能有可能出现的异常。->让 调用方法处 处理异常，或者抛出（抛出给虚拟机）。

#### 对多异常的处理

1. 声明异常时，建议声明为 更具体的异常类型（不要用Exception），这样处理就更具体。
2. 对方申明几个异常，就对应有一个catch块。
     如果有多个catch块中的异常出现继承关系，父类异常catch块放在最下面。
3 .不要在catch块中打印简单的语句。->可以log日志记录。


###  4. 自定义异常类型。（必须继承Exception）

>以为项目中会出现特有的问题，而java未描述，可以自定义异常进行封装。

函数内部 手动new throw抛出 异常对象
     ->要不还属内部catch处理；
     ->要不函数throws声明让调用者处理

自定义异常，重写getMessage，自定义异常信息。->其实子类（自定义异常）可以通过 构造函数 传入message。

>继承Exception的原因：
 
 异常类和异常对象都会被抛出，具有可抛性。这个可抛性是Throwable这个体系中独有特点。
 只有这个体系中的类和对象才可以被throws和throw操作。

### 5. 异常机制中的常见疑问

>throws和throw的区别？

throws使用在函数上；throw使用在函数内。
throws后面跟的异常类（多个）；throw后面更的是异常对象。


    1. Exception中有一个特殊的子类异常RuntimException运行时异常。->引发程序停止！！

如果在函数内 抛出异常，函数上可以不用声明，编译一样通过。（相对于运行时异常：一般异常，抛出不处理，会编译失败——编译时异常。）
如果在函数上 声明异常，调用者可以不用进行处理。编译一样通过。（相对于运行时异常：声明不处理，会编译失败。——编译时异常。）

之所以不用在函数声明，是因为不需要让调用者处理。 当发生该类异常时，希望程序停止，以为运行时异常，无法计算，必须停下程序，进行修正。

自定义异常时，该异常发生，程序没必要再进行，就让它继承 RuntimeException。


>异常分哪两种？

编译时被检测的异常：能被处理catch的异常。
编译时不被检测的异常（运行时异常。RuntimeException及其子类。不能被处理的异常，修正代码！）

>finally？

无论try块里面有没有异常，都一定会执行的finally代码块。有return都执行。应用：在数据库中，释放连接。

>catch时用于处理异常。

如果没有catch就代表：异常没有被处理过；
如果该异常是被检测时异常，那么必须声明。

>子类继承父类，只能抛出父类的异常或子异常。

父类有问题了，子类只能抛父类的异常，不能抛出父类没有的异常。（为了让父类能够处理）。
父类方法没有异常，子类不能抛出异常，只能子类函数内部处理。

>异常的好处：

 1. 将问题进行封装；
 2. 将正常流程代码和问题处理代码相分离，方便阅读。

>异常的处理原则：

 1. 处理方式有两种:try或者throws 尝试处理 或者 抛出给上层处理。
 2. 调用到抛出异常的方法时，抛出几个就处理几个。一个 try对应多个catch。
 3. 多个catch，父类的catch放到最下面。
 4. catch内，需要定义针对性的处理方式。不要简单的定义printStackTrace，输出语句。也不要不写。

